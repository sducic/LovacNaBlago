CREATE TABLE LOKACIJA(
IDLOK 	NUMBER CONSTRAINT LOKACIJA_PK PRIMARY KEY,
NAZIV 	VARCHAR2(20),
DRZAVA 	VARCHAR2(20),
TIP 	VARCHAR2(20) CHECK (TIP IN ('Piramida', 'Grobnica','Ukleti Zamak','Grad duhova','Pecina','Ostrvo')) NOT NULL,
ID_ZASTITA 	NUMBER
);

ALTER TABLE LOKACIJA ADD CONSTRAINT ID_ZASTITA FOREIGN KEY(ID_ZASTITA) REFERENCES ZASTITA(IDZ);

CREATE TABLE ZASTITA(
IDZ 	NUMBER CONSTRAINT ZASTITA_PK PRIMARY KEY,
NAZIV 	VARCHAR2(20),
TIP 	VARCHAR2(20) CHECK (TIP IN ('Duh','Zmaj','Kletva')) NOT NULL
);

CREATE TABLE PREDMET(
IDPR 	NUMBER CONSTRAINT PREDMET_PK PRIMARY KEY,
NAZIV 	VARCHAR2(20),
TIP 	VARCHAR2(20) CHECK (TIP IN ('Lobanja','Krst','Mac','Knjiga')) NOT NULL,
MATERIJAL 	VARCHAR2(20) CHECK (MATERIJAL IN ('Zlato','Srebro','Dijamant','Metal','Papir')) NOT NULL
);

CREATE TABLE NALAZISTE_ZLATA(
ID 	NUMBER CONSTRAINT NALAZISTE_ZLATA_PK PRIMARY KEY,
NAZIV 	VARCHAR2(20));

CREATE TABLE OBICNO_NALAZISTE(
ID1 	NUMBER,
DRZAVA 	VARCHAR2(20),
DATUM_OTKRICA 	DATE,
NALAZAC 	VARCHAR2(30),
NAZIV_REKE 	VARCHAR2(20)
);

ALTER TABLE OBICNO_NALAZISTE ADD CONSTRAINT ID1_FK FOREIGN KEY(ID1) REFERENCES NALAZISTE_ZLATA(ID);

CREATE TABLE IZGUBLJENO_BLAGO(
ID2 	NUMBER,
POREKLO 	VARCHAR2(40) CHECK (POREKLO IN ('Blago vitezova templara','Gusarsko blago','Atlantida','Egipat','Inke','Maje','Vikinzi')),
MAPA 	INTEGER DEFAULT 0 CHECK (MAPA in (0, 1)),
IDL 	NUMBER,
IDPRED 	NUMBER,
IDLOKACIJE 	NUMBER
);

ALTER TABLE IZGUBLJENO_BLAGO ADD CONSTRAINT ID2_FK FOREIGN KEY(ID2) REFERENCES NALAZISTE_ZLATA(ID);

ALTER TABLE IZGUBLJENO_BLAGO ADD CONSTRAINT IDL_FK FOREIGN KEY(IDL) REFERENCES LOVAC_NA_BLAGO(IDLOVAC);
ALTER TABLE IZGUBLJENO_BLAGO ADD CONSTRAINT IDPRED_FK FOREIGN KEY(IDPRED) REFERENCES PREDMET(IDPR);
ALTER TABLE IZGUBLJENO_BLAGO ADD CONSTRAINT IDLOKACIJE_FK FOREIGN KEY(IDLOKACIJE) REFERENCES LOKACIJA(IDLOK);

CREATE TABLE LOVAC_NA_BLAGO(
IDLOVAC 	NUMBER CONSTRAINT LOVAC_NA_BLAGO_PK PRIMARY KEY,
IME 	VARCHAR2(20),
PREZIME 	VARCHAR(20)
);

CREATE TABLE TRAZIO(
IDLOV 		NUMBER,
IDBLAGA1 	NUMBER
);

ALTER TABLE TRAZIO ADD CONSTRAINT IDLOV_FK FOREIGN KEY(IDLOV) REFERENCES LOVAC_NA_BLAGO(IDLOVAC);
ALTER TABLE TRAZIO ADD CONSTRAINT IDBLAGA1_FK FOREIGN KEY(IDBLAGA1) REFERENCES NALAZISTE_ZLATA(ID);

CREATE TABLE LEGENDA(
IDBLAGA2 	NUMBER,
LEGENDA 	VARCHAR2(100)
);

ALTER TABLE LEGENDA ADD CONSTRAINT IDBLAGA2_FK FOREIGN KEY(IDBLAGA2) REFERENCES NALAZISTE_ZLATA(ID);

